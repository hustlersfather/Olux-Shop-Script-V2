<?php

// routes/admin.php

use App\Http\Controllers\Admin\AdminController;
use App\Http\Controllers\Admin\TicketController;
use App\Http\Controllers\Admin\WithdrawalController;
use App\Http\Controllers\Admin\ToolController;
use App\Http\Controllers\Admin\ResellerController; // Correct casing
use App\Http\Controllers\Admin\NewsBuyerController;
use App\Http\Controllers\Admin\NewsResellerController; // Correct casing

use Illuminate\Support\Facades\Route;

Route::middleware(['auth', 'isAdmin'])->group(function () {
    // Admin dashboard
    Route::get('/', [AdminController::class, 'dashboard'])
        ->name('admin.dashboard');

    // Ticket Management
    Route::prefix('tickets')->group(function () {
        Route::get('/', [TicketController::class, 'index'])->name('admin.tickets.index');  // List tickets
        Route::get('/create', [TicketController::class, 'create'])->name('admin.tickets.create'); // Show create form
        Route::post('/', [TicketController::class, 'store'])->name('admin.tickets.store'); // Store new ticket
        Route::get('/{ticket}/edit', [TicketController::class, 'edit'])->name('admin.tickets.edit'); // Show edit form
        Route::put('/{ticket}', [TicketController::class, 'update'])->name('admin.tickets.update'); // Update ticket
        Route::delete('/{ticket}', [TicketController::class, 'destroy'])->name('admin.tickets.destroy'); // Delete ticket
    });

    // Withdrawal Management
    Route::prefix('withdrawals')->group(function () {
        Route::get('/', [WithdrawalController::class, 'index'])->name('admin.withdrawals.index');  
        Route::get('/create', [WithdrawalController::class, 'create'])->name('admin.withdrawals.create'); 
        Route::post('/', [WithdrawalController::class, 'store'])->name('admin.withdrawals.store'); 
        Route::get('/{withdrawal}/edit', [WithdrawalController::class, 'edit'])->name('admin.withdrawals.edit'); 
        Route::put('/{withdrawal}', [WithdrawalController::class, 'update'])->name('admin.withdrawals.update'); 
        Route::delete('/{withdrawal}', [WithdrawalController::class, 'destroy'])->name('admin.withdrawals.destroy'); 
    });

    // Tool Management
    Route::prefix('tools')->group(function () {
        Route::get('/', [ToolController::class, 'index'])->name('admin.tools.index');  
        Route::get('/create', [ToolController::class, 'create'])->name('admin.tools.create'); 
        Route::post('/', [ToolController::class, 'store'])->name('admin.tools.store'); 
        Route::get('/{tool}/edit', [ToolController::class, 'edit'])->name('admin.tools.edit'); 
        Route::put('/{tool}', [ToolController::class, 'update'])->name('admin.tools.update'); 
        Route::delete('/{tool}', [ToolController::class, 'destroy'])->name('admin.tools.destroy'); 
    });

    // Reseller Management
    Route::prefix('resellers')->group(function () {
        Route::get('/', [ResellerController::class, 'index'])->name('admin.resellers.index');  
        Route::get('/create', [ResellerController::class, 'create'])->name('admin.resellers.create'); 
        Route::post('/', [ResellerController::class, 'store'])->name('admin.resellers.store'); 
        Route::get('/{reseller}/edit', [ResellerController::class, 'edit'])->name('admin.resellers.edit'); 
        Route::put('/{reseller}', [ResellerController::class, 'update'])->name('admin.resellers.update'); 
        Route::delete('/{reseller}', [ResellerController::class, 'destroy'])->name('admin.resellers.destroy'); 
    });

    // News Buyer Management
    Route::prefix('newsbuyers')->group(function () {
        Route::get('/', [NewsBuyerController::class, 'index'])->name('admin.newsbuyers.index');  
        Route::get('/create', [NewsBuyerController::class, 'create'])->name('admin.newsbuyers.create'); 
        Route::post('/', [NewsBuyerController::class, 'store'])->name('admin.newsbuyers.store'); 
        Route::get('/{newsbuyer}/edit', [NewsBuyerController::class, 'edit'])->name('admin.newsbuyers.edit'); 
        Route::put('/{newsbuyer}', [NewsBuyerController::class, 'update'])->name('admin.newsbuyers.update'); 
        Route::delete('/{newsbuyer}', [NewsBuyerController::class, 'destroy'])->name('admin.newsbuyers.destroy'); 
    });

    // News Reseller Management
    Route::prefix('newsresellers')->group(function () {
        Route::get('/', [NewsResellerController::class, 'index'])->name('admin.newsresellers.index');  
        Route::get('/create', [NewsResellerController::class, 'create'])->name('admin.newsresellers.create'); 
        Route::post('/', [NewsResellerController::class, 'store'])->name('admin.newsresellers.store'); 
        Route::get('/{newsreseller}/edit', [NewsResellerController::class, 'edit'])->name('admin.newsresellers.edit'); 
        Route::put('/{newsreseller}', [NewsResellerController::class, 'update'])->name('admin.newsresellers.update'); // Fixed typo
        Route::delete('/{newsreseller}', [NewsResellerController::class, 'destroy'])->name('admin.newsresellers.destroy'); 
    });
});